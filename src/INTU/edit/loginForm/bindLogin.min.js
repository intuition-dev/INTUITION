// mB v8.2.5 on 2020-02-25T00:42:29.248Z
function sendVcode(email,loginViewModel){''!==email&&loginViewModel.sendVcodEditor(email).then((function(result){}))}function resetPass(email,code,pass,loginViewModel){''!==email&&''!==pass&&''!==code&&loginViewModel.resetPassEditor(email,code,pass).then((function(result){result?($('.js-pass-changed-notification').removeClass('d-hide'),setTimeout((function(){$('.js-pass-changed-notification').addClass('d-hide'),$('.js-login-form, .js-btn-login, [data="reset-password"]').removeClass('d-hide')}),4e3)):$('.js-pass-changed-notification-err').removeClass('d-hide')}))}depp.require('scripts',(function(){$('input[name="login"]:-webkit-autofill').length>0&&$('input[name="login"]').parents('.input-wrap').find('label').addClass('focus'),$('input[name="password"]:-webkit-autofill').length>0&&$('input[name="password"]').parents('.input-wrap').find('label').addClass('focus'),$('.login-form input').focus((function(){var label=$(this).parents('.input-wrap').find('label');''===$(this).val()&&label.addClass('focus')})),$('.login-form input').focusout((function(){var label=$(this).parents('.input-wrap').find('label');''===$(this).val()&&label.removeClass('focus')}))})),depp.require(['ui','scripts','loginViewModel'],(async function(){var loginViewModel=await LoginViewModel.inst();$(document).on('submit','#login-form',(function(e){e.preventDefault(),function checkUser(formLogin,formPassw,loginViewModel){loginViewModel.checkEditor(formLogin,formPassw).then((function(result){if(result){window.sessionStorage.setItem('username',formLogin),window.sessionStorage.setItem('password',formPassw);let hash=location.hash;window.location.replace('/edit/edit/'+hash)}else window.location='/edit'}))}($("#login-form input[name='login']").val(),$("#login-form input[name='password']").val(),loginViewModel)})),$(document).on('click','[data="reset-password"]',(function(e){e.preventDefault(),$('#login-form, #btn-login, [data="reset-password"]').addClass('d-hide'),$("[name='reset-pass-form']").removeClass('d-hide')})),$(document).on('submit','[name="reset-pass-form"]',(function(e){e.preventDefault(),$("[name='reset-pass-form']").addClass('d-hide'),$("[name='reset-pass-form-2']").removeClass('d-hide'),window.resetEmail=$("[name='reset-password-email']").val(),$('.v-code').html('Verification code was sent to '+resetEmail),sendVcode(resetEmail,loginViewModel)}));let urlEmail=new URL(location.href).searchParams.get("email");null!==urlEmail&&''!==urlEmail?($('#login-form, #btn-login, [data="reset-password"]').addClass('d-hide'),$("[name='reset-pass-form-2']").removeClass('d-hide'),$('.v-code').html('Verification code was sent to '+urlEmail),sendVcode(urlEmail,loginViewModel),$(document).on('submit','[name="reset-pass-form-2"]',(function(e){e.preventDefault(),$("[name='reset-pass-form-2']").addClass('d-hide');let password=$("[name='new-password']").val(),vCode=$("[name='v-code']").val();resetPass(urlEmail,vCode,password,loginViewModel)}))):$(document).on('submit','[name="reset-pass-form-2"]',(function(e){e.preventDefault(),$("[name='reset-pass-form-2']").addClass('d-hide');let password=$("[name='new-password']").val(),vCode=$("[name='v-code']").val();resetPass(resetEmail,vCode,password,loginViewModel)}))}));