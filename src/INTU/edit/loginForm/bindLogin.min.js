// mB v7.11.20 on 2019-11-30T19:19:26.807Z
function sendVcode(e,s){""!==e&&s.sendVcodEditor(e).then((function(e){}))}function resetPass(e,s,n,a){""!==e&&""!==n&&""!==s&&a.resetPassEditor(e,s,n).then((function(e){e?($(".js-pass-changed-notification").removeClass("d-hide"),setTimeout((function(){$(".js-pass-changed-notification").addClass("d-hide"),$('.js-login-form, .js-btn-login, [data="reset-password"]').removeClass("d-hide")}),4e3)):$(".js-pass-changed-notification-err").removeClass("d-hide")}))}function checkUser(e,s,n){n.checkEditor(e,s).then((function(n){if(n){window.sessionStorage.setItem("username",e),window.sessionStorage.setItem("password",s)
let n=location.hash
window.location.replace("/edit/edit/"+n)}else window.location="/edit"}))}depp.require("scripts",(function(){$('input[name="login"]:-webkit-autofill').length>0&&$('input[name="login"]').parents(".input-wrap").find("label").addClass("focus"),$('input[name="password"]:-webkit-autofill').length>0&&$('input[name="password"]').parents(".input-wrap").find("label").addClass("focus"),$(".login-form input").focus((function(){var e=$(this).parents(".input-wrap").find("label")
""===$(this).val()&&e.addClass("focus")})),$(".login-form input").focusout((function(){var e=$(this).parents(".input-wrap").find("label")
""===$(this).val()&&e.removeClass("focus")}))})),depp.require(["ui","scripts","loginViewModel"],(async function(){var e=await LoginViewModel.inst()
$(document).on("submit","#login-form",(function(s){s.preventDefault(),checkUser($("#login-form input[name='login']").val(),$("#login-form input[name='password']").val(),e)})),$(document).on("click",'[data="reset-password"]',(function(e){e.preventDefault(),$('#login-form, #btn-login, [data="reset-password"]').addClass("d-hide"),$("[name='reset-pass-form']").removeClass("d-hide")})),$(document).on("submit",'[name="reset-pass-form"]',(function(s){s.preventDefault(),$("[name='reset-pass-form']").addClass("d-hide"),$("[name='reset-pass-form-2']").removeClass("d-hide"),window.resetEmail=$("[name='reset-password-email']").val(),$(".v-code").html("Verification code was sent to "+resetEmail),sendVcode(resetEmail,e)}))
let s=new URL(location.href).searchParams.get("email")
null!==s&&""!==s?($('#login-form, #btn-login, [data="reset-password"]').addClass("d-hide"),$("[name='reset-pass-form-2']").removeClass("d-hide"),$(".v-code").html("Verification code was sent to "+s),sendVcode(s,e),$(document).on("submit",'[name="reset-pass-form-2"]',(function(n){n.preventDefault(),$("[name='reset-pass-form-2']").addClass("d-hide")
let a=$("[name='new-password']").val(),t=$("[name='v-code']").val()
resetPass(s,t,a,e)}))):$(document).on("submit",'[name="reset-pass-form-2"]',(function(s){s.preventDefault(),$("[name='reset-pass-form-2']").addClass("d-hide")
let n=$("[name='new-password']").val(),a=$("[name='v-code']").val()
resetPass(resetEmail,a,n,e)}))}))