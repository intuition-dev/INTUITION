// mB v7.11.20 on 2019-11-30T19:19:26.807Z
function login(e,n,o){o.checkAdmin(e,n).then((function(o){o?(window.sessionStorage.setItem("username",e),window.sessionStorage.setItem("password",n),window.location="/admin/settings"):window.location="/admin"}))}function signOut(){sessionStorage.removeItem("username"),sessionStorage.removeItem("password"),""!==window.location.pathname&&"/admin"!==window.location.pathname&&window.location.replace("/admin")}depp.define({loginViewModel:["/admin/models/LoginViewModel.js"]}),depp.require("baseVm"),depp.require("loginViewModel"),depp.require(["ui","scripts","loginViewModel"],(async function(){var e=await LoginViewModel.inst()
$(document).on("click","#btn-login",(function(n){n.preventDefault(),login($("#login-form input[name='login']").val(),$("#login-form input[name='password']").val(),e)})),$(document).on("click",'[data="reset-password"]',(function(e){e.preventDefault(),$('#login-form, #btn-login, [data="reset-password"]').addClass("d-hide"),$("[name='reset-pass-form']").removeClass("d-hide")})),$(document).on("submit",'[name="reset-pass-form"]',(function(n){n.preventDefault(),$("[name='reset-pass-form']").addClass("d-hide"),$("[name='reset-pass-form-2']").removeClass("d-hide"),window.resetEmail=$("[name='reset-password-email']").val()
let o=window.location.href
$(".v-code").html("Verification code was sent to "+resetEmail),sendVcode(resetEmail,o,e)})),$(document).on("submit",'[name="reset-pass-form-2"]',(function(n){n.preventDefault(),$("[name='reset-pass-form-2']").addClass("d-hide")
let o=$("[name='new-password']").val(),s=$("[name='v-code']").val()
resetPass(resetEmail,s,o,e)})),"code"===window.location.hash.substring(1)&&($('#login-form, #btn-login, [data="reset-password"]').addClass("d-hide"),$("[name='reset-pass-form-2']").removeClass("d-hide")),$("#sign-out").off("click").on("click",(function(e){signOut()}))}))