// mB v6.08.2 on 2019-09-02T13:16:52.246Z
function onPoly(){depp.require("loginViewModel")}function login(e,n,o){o.checkAdmin(e,n).then(function(o){o?(window.sessionStorage.setItem("username",e),window.sessionStorage.setItem("password",n),window.location="/admin/settings"):window.location="/admin"})}function signOut(){sessionStorage.removeItem("username"),sessionStorage.removeItem("password"),""!==window.location.pathname&&"/admin"!==window.location.pathname&&window.location.replace("/admin")}function sendVcode(e,n,o){""!==e&&o.sendVcode(e,n).then(function(e){})}function resetPass(e,n,o,s){""!==e&&""!==o&&""!==n&&s.resetPass(e,n,o).then(function(e){e?($(".js-pass-changed-notification").removeClass("d-hide"),setTimeout(function(){$(".js-pass-changed-notification").addClass("d-hide"),$('.js-login-form, .js-btn-login, [data="reset-password"]').removeClass("d-hide")},4e3)):$(".js-pass-changed-notification-err").removeClass("d-hide")})}depp.require(["poly"],onPoly),depp.define({loginViewModel:["/admin/models/LoginViewModel.js"]}),depp.require(["rw","#scripts"],async function(){var e=await LoginViewModel.inst()
$(document).on("click","#btn-login",function(n){n.preventDefault(),login($("#login-form input[name='login']").val(),$("#login-form input[name='password']").val(),e)}),$(document).on("click",'[data="reset-password"]',function(e){e.preventDefault(),$('#login-form, #btn-login, [data="reset-password"]').addClass("d-hide"),$("[name='reset-pass-form']").removeClass("d-hide")}),$(document).on("submit",'[name="reset-pass-form"]',function(n){n.preventDefault(),$("[name='reset-pass-form']").addClass("d-hide"),$("[name='reset-pass-form-2']").removeClass("d-hide"),window.resetEmail=$("[name='reset-password-email']").val()
let o=window.location.href
$(".v-code").html("Verification code was sent to "+resetEmail),sendVcode(resetEmail,o,e)}),$(document).on("submit",'[name="reset-pass-form-2"]',function(n){n.preventDefault(),$("[name='reset-pass-form-2']").addClass("d-hide")
let o=$("[name='new-password']").val(),s=$("[name='v-code']").val()
resetPass(resetEmail,s,o,e)}),"code"===window.location.hash.substring(1)&&($('#login-form, #btn-login, [data="reset-password"]').addClass("d-hide"),$("[name='reset-pass-form-2']").removeClass("d-hide")),$("#sign-out").off("click").on("click",function(e){signOut()})})