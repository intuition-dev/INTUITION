// mB v6.10.0 on 2019-10-07T09:45:21.580Z
function login(e,n,s){s.checkAdmin(e,n).then((function(s){s?(window.sessionStorage.setItem("username",e),window.sessionStorage.setItem("password",n),window.location="/admin/settings"):window.location="/admin"}))}function signOut(){sessionStorage.removeItem("username"),sessionStorage.removeItem("password"),""!==window.location.pathname&&"/admin"!==window.location.pathname&&window.location.replace("/admin")}function sendVcode(e,n,s){""!==e&&s.sendVcode(e,n).then((function(e){}))}function resetPass(e,n,s,o){""!==e&&""!==s&&""!==n&&o.resetPass(e,n,s).then((function(e){e?($(".js-pass-changed-notification").removeClass("d-hide"),setTimeout((function(){$(".js-pass-changed-notification").addClass("d-hide"),$('.js-login-form, .js-btn-login, [data="reset-password"]').removeClass("d-hide")}),4e3)):$(".js-pass-changed-notification-err").removeClass("d-hide")}))}depp.define({loginViewModel:["/admin/models/LoginViewModel.js"]}),depp.require("baseVm"),depp.require("loginViewModel"),depp.require(["ui","scripts","loginViewModel"],(async function(){var e=await LoginViewModel.inst()
$(document).on("click","#btn-login",(function(n){n.preventDefault(),login($("#login-form input[name='login']").val(),$("#login-form input[name='password']").val(),e)})),$(document).on("click",'[data="reset-password"]',(function(e){e.preventDefault(),$('#login-form, #btn-login, [data="reset-password"]').addClass("d-hide"),$("[name='reset-pass-form']").removeClass("d-hide")})),$(document).on("submit",'[name="reset-pass-form"]',(function(n){n.preventDefault(),$("[name='reset-pass-form']").addClass("d-hide"),$("[name='reset-pass-form-2']").removeClass("d-hide"),window.resetEmail=$("[name='reset-password-email']").val()
let s=window.location.href
$(".v-code").html("Verification code was sent to "+resetEmail),sendVcode(resetEmail,s,e)})),$(document).on("submit",'[name="reset-pass-form-2"]',(function(n){n.preventDefault(),$("[name='reset-pass-form-2']").addClass("d-hide")
let s=$("[name='new-password']").val(),o=$("[name='v-code']").val()
resetPass(resetEmail,o,s,e)})),"code"===window.location.hash.substring(1)&&($('#login-form, #btn-login, [data="reset-password"]').addClass("d-hide"),$("[name='reset-pass-form-2']").removeClass("d-hide")),$("#sign-out").off("click").on("click",(function(e){signOut()}))}))