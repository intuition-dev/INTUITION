// mB v8.2.5 on 2020-02-25T00:42:29.248Z
depp.define({loginViewModel:['/admin/models/LoginViewModel.js']}),depp.require('loginViewModel'),depp.require(['ui','scripts','loginViewModel'],(async function(){var loginViewModel=await LoginViewModel.inst();$(document).on('click','#btn-login',(function(ev){ev.preventDefault(),function login(email,pass,loginViewModel){loginViewModel.checkAdmin(email,pass).then((function(result){result?(window.sessionStorage.setItem('username',email),window.sessionStorage.setItem('password',pass),window.location='/admin/settings'):window.location='/admin'}))}($("#login-form input[name='login']").val(),$("#login-form input[name='password']").val(),loginViewModel)})),$(document).on('click','[data="reset-password"]',(function(e){e.preventDefault(),$('#login-form, #btn-login, [data="reset-password"]').addClass('d-hide'),$("[name='reset-pass-form']").removeClass('d-hide')})),$(document).on('submit','[name="reset-pass-form"]',(function(e){e.preventDefault(),$("[name='reset-pass-form']").addClass('d-hide'),$("[name='reset-pass-form-2']").removeClass('d-hide'),window.resetEmail=$("[name='reset-password-email']").val();let loginUrl=window.location.href;$('.v-code').html('Verification code was sent to '+resetEmail),sendVcode(resetEmail,loginUrl,loginViewModel)})),$(document).on('submit','[name="reset-pass-form-2"]',(function(e){e.preventDefault(),$("[name='reset-pass-form-2']").addClass('d-hide');let password=$("[name='new-password']").val(),vCode=$("[name='v-code']").val();resetPass(resetEmail,vCode,password,loginViewModel)})),'code'===window.location.hash.substring(1)&&($('#login-form, #btn-login, [data="reset-password"]').addClass('d-hide'),$("[name='reset-pass-form-2']").removeClass('d-hide')),$('#sign-out').off('click').on('click',(function(e){!function signOut(){sessionStorage.removeItem('username'),sessionStorage.removeItem('password'),''!==window.location.pathname&&'/admin'!==window.location.pathname&&window.location.replace('/admin')}()}))}));