// mB v6.08.13 on 2019-08-17T14:11:27.851Z
class BindSettings{constructor(){this.settingsViewModel=new SettingsViewModel}setupApp(e){$(".loader").addClass("active"),this.settingsViewModel.setupApp(e).then(function(e){$(".loader").removeClass("active")})}getForm(){var e=this
this.settingsViewModel.getConfig().then(function(i){riot.mount("settings-comp",{emailjsService_id:i.emailjsService_id,emailjsTemplate_id:i.emailjsTemplate_id,emailjsUser_id:i.emailjsUser_id,pathToSite:i.pathToApp,port:i.port,bindSetup:e})}).catch(e=>{})}getPort(){this.settingsViewModel.getConfig().then(function(e){$(".js-goto-editors").attr("href","http://localhost:"+e.port+"/edit/")})}saveConfig(e){var i=e.filter(function(e){if("port"==e.name)return e})[0].value,t=e.filter(function(e){if("path"==e.name)return e})[0].value,s=e.filter(function(e){if("emailjsService_id"==e.name)return e})[0].value,n=e.filter(function(e){if("emailjsTemplate_id"==e.name)return e})[0].value,a=e.filter(function(e){if("emailjsUser_id"==e.name)return e})[0].value
this.settingsViewModel.updateConfig(i,t,s,n,a).then(e=>{i!=window.apiPort&&(window.location.href="/admin"),riot.mount("settings-comp",{pathToSite:e[0].path,port:e[0].port,bindSetup:this,emailjsService_id:e[0].emailjsService_id,emailjsTemplate_id:e[0].emailjsTemplate_id,emailjsUser_id:e[0].emailjsUser_id})})}}