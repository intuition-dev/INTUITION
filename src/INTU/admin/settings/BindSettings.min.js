// mB v6.10.2 on 2019-10-08T12:05:06.503Z
var settingsViewModel=null
function setupApp(e,i){$(".loader").addClass("active"),i.setupApp(e).then((function(e){$(".loader").removeClass("active")}))}function getForm(e){var i=this
e.getConfig().then((function(e){riot.mount("settings-comp",{emailjsService_id:e.emailjsService_id,emailjsTemplate_id:e.emailjsTemplate_id,emailjsUser_id:e.emailjsUser_id,pathToSite:e.pathToApp,port:e.port,bindSetup:i})})).catch(e=>{})}function getPort(e){e.getConfig().then((function(e){$(".js-goto-editors").attr("href","http://localhost:"+e.port+"/edit/")}))}function saveConfig(e){var i=e.filter((function(e){if("path"==e.name)return e}))[0].value,t=e.filter((function(e){if("emailjsService_id"==e.name)return e}))[0].value,s=e.filter((function(e){if("emailjsTemplate_id"==e.name)return e}))[0].value,n=e.filter((function(e){if("emailjsUser_id"==e.name)return e}))[0].value
settingsViewModel.updateConfig(i,t,s,n).then(e=>{riot.mount("settings-comp",{pathToSite:e[0].path,bindSetup:this,emailjsService_id:e[0].emailjsService_id,emailjsTemplate_id:e[0].emailjsTemplate_id,emailjsUser_id:e[0].emailjsUser_id})})}depp.define({settingsViewModel:["../models/SettingsViewModel.js"]}),depp.require("baseVm"),depp.require("settingsViewModel"),depp.require(["ui","scripts","setup-page"],(async function(){getPort(settingsViewModel=await SettingsViewModel.inst()),getForm(settingsViewModel),$("#setup-shop").off("click").on("click",(function(e){setupApp("shop",settingsViewModel)})),$("#setup-blog").off("click").on("click",(function(e){setupApp("blog",settingsViewModel)})),$("#setup-website").off("click").on("click",(function(e){setupApp("website",settingsViewModel)})),window.apiPort=window.location.port}))