// mB v5.07.05 on 2019-06-06T17:30:12.277Z
!function(t,i,s){"use strict"
var e={},a={}
function JsForm(i,s){var e=t(i)
this.options=t.extend({},{controls:!0,data:null,prefix:"data",trackChanges:"changed",validateHidden:!0,skipEmpty:!1,renderer:null,processors:null,dataHandler:null,connect:null,viewClass:"value"},s),!e.attr("data-prefix")||"data"!==this.options.prefix&&""!==this.options.prefix||""!==e.attr("data-prefix")&&(this.options.prefix=e.attr("data-prefix")),this.element=i,this._init()}JsForm.prototype._init=function(){if(this._domInit(),this.options.controls)if(t.jsFormControls)t.each(this._getForm(),function(){t(this).jsFormControls()})
else try{"undefined"!=typeof console&&this._debug("jquery.JsForm.controls not available!")}catch(t){}this._fill()},JsForm.prototype.connect=function(i){this._initCollection(i,this.options.prefix),this._initConditional(i,this.options.prefix,this.options),this.options.controls&&t.jsFormControls&&t(i).jsFormControls(),this._fillDom(i),this.options.connect||(this.options.connect=[]),this.options.connect.push(i)},JsForm.prototype.getNodes=function(){return this._getForm()},JsForm.prototype._domInit=function(){var i=this
t.each(this._getForm(),function(){i._initCollection(this,i.options.prefix),i._initConditional(this,i.options.prefix,i.options)})},JsForm.prototype._debug=function(s,e){try{var a=console||(i?i.console:null)
if(!a||!a.log)return
var r=null;(r=t.isPlainObject(e)?JSON.stringify(e,null," "):e)||(r=""),a.log(s+r)}catch(t){}},JsForm.prototype._initConditional=function(i,s,e){var a=this,r=function(i,s,e){var r=!1
t.each(e,function(){var t=a._getValueWithArrays(s,this)
if(t&&""!==t&&0!==t&&-1!==t)return r=!0,!1}),r?i.show():i.hide()},o=function(i,s,e){var r=!1
t.each(e,function(){var t=a._getValueWithArrays(s,this)
if(t&&""!==t&&0!==t&&-1!==t)return r=!0,!1}),r?i.hide():i.show()}
this.conditionals=t(i).find(".conditional"),this.conditionals.each(function(){t(this).data().conditionalEval=[]
var i=t(this).attr("data-show")
i&&i.length>0&&t(this).data().conditionalEval.push({func:r,field:i.split(" ")}),(i=t(this).attr("data-hide"))&&i.length>0&&t(this).data().conditionalEval.push({func:o,field:i.split(" ")}),(i=t(this).attr("data-eval"))&&i.length>0&&e.conditionals[i]&&t(this).data().conditionalEval.push({func:e.conditionals[i]})})},JsForm.prototype._evaluateConditionals=function(i,s){this.conditionals.each(function(){var i=t(this)
t.each(i.data().conditionalEval,function(){this.func(i,s,this.field)})})},JsForm.prototype._initCollection=function(i,s){var e={},a=this
t(i).data().collections=e,t(".collection",i).each(function(){var i=t(this).attr("data-field")
if(i&&0===i.indexOf(s+".")){var r=t(this),o=e[i]
if(o?o.push(r):e[i]=[r],a._initList(r),!r.hasClass("ui-sortable")&&r.hasClass("sortable")&&r.sortable){var n=r.attr("data-sortable")
n=n?JSON.parse(n):{},r.sortable(n),r.on("sortstop",function(t,i){a._reorder(r)})}t(this).on("add",function(i,s,e){var r=t(this).attr("data-field")
if(!e||r==e){var o=t(this).data("template")
if(s||(s={}),o){var n=o.clone(!0)
t(n).addClass("POJO"),t(n).data().pojo=s
var l=t(this).data("prefill")
l||(l=t(this).val("data-prefill")),l&&(t.isFunction(l)?l(t(n).data().pojo,t(n)):l.substring?t(n).data().pojo=JSON.parse(l):t.isPlainObject(l)&&(t(n).data().pojo=l)),t(this).append(n),a._enableTracking(t("input,textarea,select",n)),a.options.trackChanges&&t("input,textarea,select",n).addClass(a.options.trackChanges),a._addCollectionControls(n),a._initCollection(n,r.substring(r.indexOf(".")+1)),t(this).trigger("addCollection",[n,t(n).data().pojo])
var h=t(this).children(".POJO").length
a._fillData(n,t(n).data().pojo,r.substring(r.indexOf(".")+1),h),t(this).trigger("postAddCollection",[n,t(n).data().pojo])}}})}}),t(".add",i).each(function(){var i=t(this).attr("data-field")
i&&(t(this).data().collections=e[i],t(this).data().hasJsForm||(t(this).data().hasJsForm=!0,t(this).click(function(s){s.preventDefault(),t.each(t(this).data("collections"),function(){t(this).trigger("add",[null,i])})})))}),t(".insert",i).each(function(){var i=t(this).attr("data-field")
i&&(t(this).data("collections")||(t(this).data("collections",e[t(this).attr("data-field")]),t(this).on("insert",function(s,e){if(e||(e=t(this).data().pojo),e){var r=t(this).data("beforeInsert")
r&&t.isFunction(r)&&!(e=r(e))||(t.each(t(this).data("collections"),function(){var s=t(this).data("template")
if(s){var r=s.clone(!0)
r.addClass("POJO"),r.data().pojo=e,a._addCollectionControls(r),a._initCollection(r),t(this).trigger("addCollection",[r,e])
var o=t(this).children(".POJO").length
a._fillData(r,e,i.substring(i.indexOf(".")+1),o),t(this).append(r),t(this).trigger("postAddCollection",[r,e])}}),t(this).val(""),t(this).data().pojo=null,t(this).focus())}})))}),t(".insertAction",i).each(function(){if(t(this).attr("data-field")&&!t(this).data("inserter")){var i=t(this).parent().find(".insert")
i&&(t(this).data("inserter",i),t(this).click(function(i){return i.preventDefault(),t(this).data("inserter").trigger("insert"),!1}))}}),t("input.object",i).each(function(){t(this).on("update",function(i){var s=t(this).data().pojo;(t(this).attr("data-display")||t(this).attr("data-render"))&&t(this).val(a._renderObject(s,t(this).attr("data-display"),t(this).attr("data-render")))})}),t("input.blob",i).each(function(){if("file"===t(this).attr("type")){var i=t(this)
t(this).on("change",function(s){var e=t(this).val().split(/\\/).pop()
i.data("name",e)
var a=s.target.files
a&&a.length&&t.each(a,function(){var s=new FileReader
s.onload=function(t){i.data("blob",t.target.result)},s.readAsDataURL(this),t(this).trigger("fileChange")})})}})},JsForm.prototype._initList=function(t){if(!t.data("template")){var i=t.children().detach()
i.removeAttr("id"),t.data("template",i)}},JsForm.prototype._getForm=function(){var i=[t(this.element)]
return this.options.connect&&t.each(this.options.connect,function(){i.push(t(this))}),i},JsForm.prototype._clear=function(i,s){s||(s=this.options.prefix),t(i).removeData("pojo"),t("input,select,textarea",i).each(function(){var i=t(this).attr("name")
i&&0===i.indexOf(s+".")&&((i=i.substring((s+".").length)).length<1||(t(this).removeData("pojo"),"checkbox"===t(this).attr("type")?t(this).prop("checked",!1):"radio"===t(this).attr("type")?t(this).prop("checked",!1):t(this).data().valclass&&t(this)[t(this).data().valclass].val?t(this)[t(this).data().valclass](val,""):t(this).val(""),t(this).hasClass("blob")&&t(this).removeData("blob"),t(this).is("select")&&(t('option[selected="selected"]',this).prop("selected",!1),t("option:first",this).prop("selected",!0),t(this).val(t("option:first",this).val()),t(this).change()),t(this).change()))}),t(".collection",i).each(function(){var i=t(this).attr("data-field")
i&&0===i.indexOf(s+".")&&t(this).empty()})},JsForm.prototype._handleArrayInPojo=function(i,s,e,a){if(s[e]||(s[e]=[]),"checkbox"===i.attr("type")||"CHECKBOX"===i.attr("type")){var r=i.is(":checked"),o=!0
t.each(s[e],function(t,i){if(this==a)return o=!1,r||s[e].splice(i,1),!1}),o&&r&&s[e].push(a)}else{var n=i.attr("data-array")
null===(n=!n||isNaN(n)?null:Number(n))?s[e].push(a):s[e][n]=a}},JsForm.prototype._createPojoFromInput=function(i,s,e){var a=null,r=this,o=null
return t(i).data("pojo")&&(a=t(i).data("pojo")),a&&t.extend(!0,e,a),t(i).find("input,select,textarea,.jsobject").each(function(){var i=t(this).attr("data-name")
if(i||(i=t(this).attr("name")),i&&!t(this).hasClass("transient")&&!t(this).hasClass("grayed")&&0===i.indexOf(s+".")){t(this).trigger("validate",!0),i=i.substring((s+".").length)
var a=t(this).val()
if(t(this).data().valclass&&t(this)[t(this).data().valclass]&&(a=t(this)[t(this).data().valclass]("val")),t(this).hasClass("jsobject"))a=t(this).data().pojo
else{if(r.options.skipEmpty&&(!a||""===a||""===a.trim()))return
if(!t(this).hasClass("emptynull")||a&&""!==a&&"null"!==a&&""!==a.trim())if(t(this).hasClass("object")||t(this).hasClass("POJO"))if(t("option:selected",this).data()&&t("option:selected",this).data().pojo?t("option:selected",this).data().pojo?a=t("option:selected",this).data().pojo:t("option:selected",this).attr("data-obj")&&(a=JSON.parse(t("option:selected",this).attr("data-obj"))):a=t(this).data().pojo,t.isFunction(t(this).data().processor))a=t(this).data().processor(a)
else{var n=t(this).attr("data-processor")
n&&r.options.processors[n]&&(a=r.options.processors[n](a))}else t(this).hasClass("blob")?a=t(this).data("blob"):""===a&&(t(this).hasClass("number")||t(this).hasClass("percent")||t(this).hasClass("integer")||t(this).hasClass("dateFilter")||t(this).hasClass("dateTimeFilter"))&&(a=null)
else a=null
if(t(this).data().processor)a=t(this).data().processor(a)
else if(t(this).hasClass("number")||t(this).hasClass("integer")){if(t(this).hasClass("date")&&isNaN(a))if(t.format){var l=t.format.date(a)
l.setHours(0),l.setMinutes(0),l.setSeconds(0),l.setMilliseconds(0),a=l.getTime()}else a=new Date(a).getTime()
else a=r._getNumber(a)
isNaN(a)&&(a=0)}else if("checkbox"===t(this).attr("type")||"CHECKBOX"===t(this).attr("type"))t(this).hasClass("array")?(a=t(this).val(),t(this).attr("data-obj")&&(a=JSON.parse(t(this).attr("data-obj")))):a=t(this).is(":checked")
else if("radio"===t(this).attr("type")||"RADIO"===t(this).attr("type")){if(!t(this).is(":checked"))return}else t(this).hasClass("bool")&&(a="true"===t(this).val())}if(r.options.dataHandler&&(a=r.options.dataHandler.serialize(a,t(this),e)),i.length<1)return o=a,!1
if(-1===i.indexOf("."))t(this).hasClass("array")?r._handleArrayInPojo(t(this),e,i,a):e[i]=a
else{var h,c=i.split("."),d=e[c[0]]
d&&t.isPlainObject(d)||(e[c[0]]={},d=e[c[0]])
for(var p=1;p<c.length-1;p++)null==(d=(h=d)[c[p]])&&(d={},h[c[p]]=d)
h=c[c.length-1],t(this).hasClass("array")?r._handleArrayInPojo(t(this),d,h,a):d[h]=a}}}),t(i).find(".selectcollection").each(function(){var i=t(this).attr("data-field")
if(i&&!t(this).hasClass("transient")&&0===i.indexOf(s+".")){t(this).trigger("validate",!0),i=i.substring((s+".").length),e[i]=[]
var a=t(this).attr("data-selected"),r=t(this).attr("data-id")
t(this).children().each(function(){if(a){if(!t(this).hasClass(a))return}else if(!t("input[name='"+i+"']",this).prop("checked"))return
var s=null
r?!(s=t(this).data("obj"))&&t(this).attr("data-obj")&&(s=JSON.parse(t(this).attr("data-obj"))):s=t("input[name='"+i+"']",this).val(),s&&e[i].push(s)})}}),o},JsForm.prototype._enableTracking=function(i){if(i&&0!==i.length){var s=this
s.options.trackChanges&&!t(i).data().track&&(t(i).data().track=!0,t(i).change(function(){t(this).val()!==t(this).data().orig?t(this).addClass(s.options.trackChanges):t(this).removeClass(s.options.trackChanges)}))}},JsForm.prototype._fillSelectCollection=function(i,s,e,a){var r=this
t(i).find(".selectcollection").each(function(){var i=t(this).attr("data-selected"),a=t(this).attr("data-id"),o=t(this).attr("data-field")
if(o&&0===o.indexOf(e+".")){var n=null,l=o
e&&(l=l.substring(e.length+1)),(n=r._get(s,l))&&t.isArray(n)||(n=[]),-1!==o.indexOf(".")&&(o=o.substring(o.lastIndexOf(".")+1)),i&&(t(this).children("."+i).removeClass(i),t(this).children().each(function(){t(this).hasClass("jsfselect")||(t(this).addClass("jsfselect"),t(this).click(function(){t(this).toggleClass(i),t(this).trigger("selected")}),t(this).trigger("selected"))})),t("input[name='"+o+"']",this).prop("checked",!1),t(this).children().each(function(){var s=""
if(a){var e=t(this).data("obj")
if(!e&&t(this).attr("data-obj")&&(e=JSON.parse(t(this).attr("data-obj"))),!e)return
s=e[a]}else s=t("input[name='"+o+"']",this).val()
if(s)for(var r=0;r<n.length;r++){var l=n[r]
if(a&&(l=l[a]),s==l)return i&&t(this).addClass(i).trigger("selected"),void t("input[name='"+o+"']",this).prop("checked",!0)}})}})},JsForm.prototype._fillData=function(i,s,e,a){var r=this,o=t(i)
o.find(".field").each(function(){var i=t(this).data("name")
if(i||("A"===this.nodeName.toUpperCase()?(i=t(this).attr("href"),t(this).attr("href","#")):"IMG"===this.nodeName.toUpperCase()?(0===(i=t(this).attr("src")).indexOf("#")&&(i=i.substring(1)),t(this).attr("src","#")):i=t(this).text(),t(this).data("name",i),t(this).show()),!e||i.indexOf(e+".")>=0){var o=i
e&&(o=o.substring(e.length+1))
var n=r._get(s,o,!1,a)
n||0===n||!1===n||(n=""),t(this).hasClass("currency")&&(n||(n=0)),t(this).hasClass("titleval")&&t(this).attr("title",n),r.options.dataHandler&&(n=r.options.dataHandler.deserialize(n,t(this),o,s)),t.jsFormControls&&(n=t.jsFormControls.Format.format(this,n)),"A"===this.nodeName.toUpperCase()?t(this).attr("href",n):"IMG"===this.nodeName.toUpperCase()?t(this).attr("src",n):"DIV"===this.nodeName.toUpperCase()?t(this).html(n):t(this).text(n)}}),t("input, textarea",o).each(function(){var i=t(this).attr("name")
if(i&&(r._enableTracking(this),"file"!=t(this).attr("type")&&(!e||i.indexOf(e+".")>=0))){var o=i
e&&(o=o.substring(e.length+1))
var n=r._get(s,o,!1,a)
if(r.options.dataHandler&&(n=r.options.dataHandler.deserialize(n,t(this),o,s)),t(this).hasClass("object")?(t(this).data().pojo=n,t(this).addClass("POJO"),n=r._renderObject(n,t(this).attr("data-display"),t(this).attr("data-render"))):t(this).hasClass("jsobject")?(t(this).data().pojo=n,t(this).addClass("POJO")):t.isPlainObject(n)&&(""===o?n="":(t(this).data().pojo=n,t(this).addClass("POJO"),n=r._renderObject(n,t(this).attr("data-display"),t(this).attr("data-render")))),"checkbox"===t(this).attr("type"))if(t(this).hasClass("array")){var l=t(this).val(),h=null
t(this).attr("data-obj")&&(l=JSON.parse(t(this).attr("data-obj"))),t(this).attr("data-id")&&(h=t(this).attr("data-id"),l=l[h])
var c=!1
n&&t.each(n,function(){var t=this
if(h&&(t=t[h]),t==l)return c=!0,!1}),t(this).prop("checked",c)}else t(this).prop("checked",!0===n||"true"===n)
else if("radio"===t(this).attr("type"))t(this).prop("checked",n==t(this).val())
else if(n||0===n||!1===n||(n=""),t.jsFormControls&&(n=t.jsFormControls.Format.format(this,n)),t(this).hasClass("array")){var d=t(this).attr("data-array")
null!==(d=!d||isNaN(d)?null:Number(d))&&n&&n.length>d?t(this).val(n[d]):t(this).val("")}else t(this).data().valclass&&t(this)[t(this).data().valclass]?t(this)[t(this).data().valclass]("val",n):t(this).val(n)
r.options.trackChanges&&(t(this).data().orig=t(this).val()),t(this).trigger("fill"),t(this).change()}}),t("select",o).each(function(){var i=t(this).attr("name")
if(i&&(!e||i.indexOf(e+".")>=0)){var o=i
e&&(o=o.substring(e.length+1)),r._enableTracking(this),t(this).children("option:selected").prop("selected",!1)
var n=t(this).attr("data-key")
n||(n="id")
var l=r._get(s,o,!1,a)
if(r.options.dataHandler&&(l=r.options.dataHandler.deserialize(l,t(this),o,s)),l[n]||!isNaN(l[n]))return t(this).children("option").each(function(){var i=t(this).data().pojo
if(i||(i=t(this).data().obj),i){if(l[n]===i[n])return t(this).prop("selected",!0),!1}else if(t(this).val()==l[n])return t(this).attr("selected",!0),!1}),void t(this).change()
t(this).hasClass("bool")&&(l=l?"true":"false"),t(this).children("option[value='"+l+"']").prop("selected",!0),t(this).val(l),r.options.trackChanges&&(t(this).data().orig=t(this).val()),t(this).change().trigger("fill")}})},JsForm.prototype.get=function(i){var s=this,e=this.options.data,a=this.options.prefix,r={}
e&&t.isPlainObject(e)&&(r=t.extend({},e))
var o=!1
return t.each(this._getForm(),function(){s._createPojoFromInput(this,a,r),s.options.validateHidden?this.find(".invalid").each(function(){return o=!0,t(this).focus(),!1}):this.find(".invalid").filter(":visible").each(function(){return o=!0,t(this).focus(),i||s._debug("Found invalid field: "+t(this).attr("name")),!1}),s._getCollection(this,a,r,i)&&(o=!0)}),!i&&o?null:r},JsForm.prototype._getCollection=function(i,s,e,a){var r=this,o=!1
return i.find(".collection").each(function(){if(a||!o){var i=t(this).attr("data-field")
if(i&&0===i.indexOf(s+".")){i=i.substring((s+".").length)
var n=r._getParent(e,i,!0);-1!==i.indexOf(".")&&(i=i.substring(i.lastIndexOf(".")+1)),n[i]=[],t(this).children().each(function(){var s,e={}
if((s=r._createPojoFromInput(t(this),i,e))||r._getCollection(t(this),i,e,a),!r._isEmpty(e)||s){if(t(".invalid",this).length>0&&(o=!0,!a))return!1
s?n[i].push(s):n[i].push(e)}else t(".invalid",this).removeClass("invalid")})}}}),o},JsForm.prototype.getData=function(){return this.options.data||(this.options.data={}),this.options.data},JsForm.prototype.fieldMode=function(i,s){if(i){i.data||(i=t("input[name='"+i+"']",this.element))
var e=this.options.viewClass
if(s){if(i.closest("span."+e)[0])return
var a=i.val()
"null"!==a&&null!==a&&"submit"!==i.attr("type")||(a=""),i.hasClass("trueFalse")&&(a=i.is(":checked")?"X":"&#160;"),a=a.replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\n/g,"<br/>")
var r=t('<span class="'+e+'">'+a+"</span>")
i.parent().hasClass("ui-wrapper")?i.parent().hide().wrap(r):i.hide().wrap(r)}else{var o=i.closest("span."+e),n=i.show().detach()
o.before(n),o.remove()}}},JsForm.prototype.preventEditing=function(i){var s=t(this.element),e=this.options.viewClass
if(void 0===i)i=!s.data("disabled")
else if(i===s.data("disabled"))return
i?(s.find("input, textarea").each(function(){if(!t(this).closest("span."+e)[0]&&"hidden"!=t(this).attr("type")){var i=t(this).val()
"null"!==i&&null!==i&&"submit"!==t(this).attr("type")||(i=""),t(this).hasClass("trueFalse")&&(i=t(this).is(":checked")?"X":"&#160;"),i=i.replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\n/g,"<br/>")
var s=t('<span class="'+e+'">'+i+"</span>")
t(this).parent().hasClass("ui-wrapper")?t(this).parent().hide().wrap(s):t(this).hide().wrap(s)}}),s.find("select").each(function(){if(!t(this).closest("span."+e)[0]){var i=t(this).children(":selected").html()
"null"!==i&&null!==i||(i="")
var s=t('<span class="'+e+'">'+i+"</span>")
t(this).hasClass("ui-toggle-switch")?t(this).prev().hide().wrap(s):t(this).hide().wrap(s)}})):s.find("span."+e).each(function(){var i=t(this).children("input,select,textarea,.ui-wrapper,.ui-toggle-switch").show().detach()
t(this).before(i),t(this).remove()}),s.data("disabled",i)},JsForm.prototype.validate=function(){var i=!0
return t.each(this._getForm(),function(){t(".required,.regexp,.date,.mandatory,.number,.validate,.integer",this).change(),t(".invalid",this).length>0&&(i=!1)}),i},JsForm.prototype._fill=function(i){var s=this
t(this.element).addClass("POJO"),t(this.element).data("pojo",this.options.data),t.each(this._getForm(),function(){s._fillDom(this,i)})},JsForm.prototype._fillDom=function(t,i){i||this._clear(t,this.options.prefix),this._fillData(t,this.options.data,this.options.prefix),this._fillSelectCollection(t,this.options.data,this.options.prefix),this._fillCollection(t,this.options.data,this.options.prefix,i),this._evaluateConditionals(t,this.options.data)},JsForm.prototype._fillCollection=function(i,s,e,a){var r=this
t(".collection",i).each(function(){var i=t(this),o=t(this).attr("data-field")
if(s&&o&&0===o.indexOf(e+".")){var n,l=o
if(e&&(l=l.substring(e.length+1)),n=r._get(s,l))if(a)for(var h=0;h<n.length;h++){-1!==l.indexOf(".")&&(e=l.substring(l.lastIndexOf(".")+1))
var c=t(i.children().get(h)),d=n[h]
r._fillData(c,d,l,h+1),r._fillCollection(c,d,l,a)}else r._fillList(i,n,l)}})},JsForm.prototype._fillList=function(i,s,e,a){var r=i.data("template")
if(r&&(i.empty(),t.isArray(s))){if(-1!==e.indexOf(".")&&(e=e.substring(e.lastIndexOf(".")+1)),i.hasClass("sort")){var o=i.attr("data-sort")
if(o){switch(i.attr("data-sorttype")){case"alpha":s.sort()
break
case"alphainsensitiv":s.sort(function(t,i){return t=t[o],i=i[o],t&&(t=t.toLowerCase()),i&&(i=i.toLowerCase()),t<i?-1:t>i?1:0})
break
default:s.sort(function(t,i){return t[o]-i[o]})}i.attr("data-sortdesc")&&s.reverse()}}a||t.isFunction(e)&&(a=e,e=null)
for(var n=0;n<s.length;n++){var l=s[n],h=r.clone(!0)
h.data().pojo=l,h.addClass("POJO"),a&&!1===a(h,l)||(this._addCollectionControls(h),i.trigger("addCollection",[h,l]),e&&(this._fillData(h,l,e,n+1),this._initCollection(h,e),this._fillCollection(h,l,e)),i.append(h),i.trigger("postAddCollection",[h,t(h).data().pojo]))}}},JsForm.prototype._addCollectionControls=function(i){var s=this
t.jsFormControls&&t(i).jsFormControls(),i.on("delete",function(i,s){if(!s||s[0]===this){var e=t(this),a=t(e).data().pojo,r=t(this).closest(".collection")
e.detach(),t(r).trigger("deleteCollection",[e,a])}}),i.on("sortUp",function(){if(!target||target[0]===this){var i=t(this),e=i.prev(".POJO")
0!==e.size()&&(i.detach(),e.before(i),s._reorder(i))}}),i.on("sortDown",function(){if(!target||target[0]===this){var i=t(this),e=i.next(".POJO")
0!==e.size()&&(i.detach(),e.after(i),s._reorder(i))}}),t(".delete",i).click(function(){var i=t(this).closest(".POJO")
i.trigger("delete",[i])}),t(".sortUp",i).click(function(){var i=t(this).closest(".POJO")
i.trigger("sortUp",[i])}),t(".sortDown",i).click(function(){var i=t(this).closest(".POJO")
i.trigger("sortDown",[i])})
var e=t(i).closest(".collection")
e.hasClass("sortable")&&t(e).sortable&&e.sortable("refresh")},JsForm.prototype._reorder=function(i){i.attr("data-sort")||(i=i.closest(".collection"))
var s=t(i).attr("data-sort")
if(!(!s||t(i).attr("data-sorttype")&&"number"!==t(i).attr("data-sorttype")||t(i).attr("data-sortdesc")&&"false"!==t(i).attr("data-sortdesc"))){var e=0
t.each(t(i).children(),function(){var i=t(this).data("pojo")
i||(i={},t(this).data("pojo",i)),i[s]=e++})}},JsForm.prototype._renderObject=function(i,s,e){if(!i||!s&&!e)return""
if(e)return this.options.renderer&&this.options.renderer[e]?this.options.renderer[e](i):(this._debug("Unable to find renderer: "+e),"")
var a=this,r=""
return t.each(s.split(","),function(){var t=this.trim()
0===t.indexOf("'")||0===t.indexOf('"')?r+=t.substring(1,t.length-1):r+=a._get(i,t)}),r},JsForm.prototype._get=function(t,i,s,e){var a,r,o,n=""
if("function"==typeof i)return i(t)
if(!t)return""
if(""===i)return t
if("$idx"===i)return e
if(!(a=t[i]))try{if("string"==typeof i&&(n=i.split(".")),o=n.length)for(a=t;a&&o--;)r=n.shift(),s&&!a[r]&&(a[r]={}),a=a[r]}catch(t){}return null==a&&(a=""),a.trim?a.trim():a},JsForm.prototype._getValueWithArrays=function(t,i){if(null===t)return null
i=i.split(".")
for(var s=/(.*)\[(\d+)\]/,e=1;e<i.length;e++){var a=s.exec(i[e])
try{t=a?t[a[1]][parseInt(a[2],10)]:t[i[e]]}catch(t){this._debug(i+" "+t)}}return t},JsForm.prototype._getParent=function(t,i,s){return-1===i.indexOf(".")?t:(i=i.substring(0,i.lastIndexOf(".")),this._get(t,i,s))},JsForm.prototype._getNumber=function(i){return i?t.jsFormControls?t.jsFormControls.Format._getNumber(i):(-1!=i.indexOf(",")&&(i=i.replace(new RegExp(",","g"),"")),Number(i)):null},JsForm.prototype._isEmpty=function(i){if(!i)return!0
if(t.isArray(i)){if(0===i.length)return!0
for(var s=0;s<i.length;s++)if(!this._isEmpty())return!1
return!0}if(t.isPlainObject(i)){if(t.isEmptyObject(i))return!0
for(var e in i)if(!this._isEmpty(i[e]))return!1
return!0}return isNaN(i)?""===i||" "===i:0===Number(i)||-1===Number(i)},JsForm.prototype._equals=function(t,i,s){if(!t&&i&&i.length&&0===i.length)return!0
if(!i&&t&&t.length&&0===t.length)return!0
if(!t&&!i)return!0
var e=null
for(e in t){if(void 0===i[e]&&null!==t[e]&&""!==t[e]&&0!==t[e].length){if(("0"===t[e]||0===t[e])&&!i[e])continue
return!1}if(t[e])switch(typeof t[e]){case"object":if(s&&t[e][s]&&t[e][s]===i[e][s])continue
if(!this._equals(t[e],i[e]))return!1
break
case"function":break
default:if(!t[e]&&!i[e])break
if((!0===t||!1===t)&&t!==i)return!1
if(!isNaN(t[e])||!isNaN(i[e])){if(Math.abs(Number(t[e])-Number(i[e]))<1e-7)break
return!1}if((""+t[e]).length!==(""+i[e]).length)return!1
if(t[e]!==i[e]&&Number(t[e])!==Number(i[e]))return!1}else if(i[e])return!1}for(e in i)if((!t||void 0===t[e])&&null!==i[e]&&""!==i[e])return!1
return!0},JsForm.prototype.equals=function(t,i){var s=this.get(!1)
return this._equals(s,t,i)},JsForm.prototype.changed=function(){if(!this.options.trackChanges)return!1
var i=!1,s=this
return t.each(this._getForm(),function(){if(t("."+s.options.trackChanges,this).size()>0)return i=!0,!1}),i},JsForm.prototype.clearChanged=function(){var i=this
t.each(this._getForm(),function(){this.find("."+i.options.trackChanges).removeClass(i.options.trackChanges)})},JsForm.prototype.resetChanged=function(){if(!this.options.trackChanges)return!1
var i=this
return t.each(this._getForm(),function(){t("."+i.options.trackChanges,this).each(function(){t(this).removeClass(i.options.trackChanges),t(this).data().orig=t(this).val()})}),!1},JsForm.prototype._equalsCollection=function(i,s,e){var a=this,r=!1
return t(".collection",i).each(function(){if(!r){var i=t(this).attr("data-field")
if(i&&0===i.indexOf(s+".")&&!((i=i.substring((s+".").length)).length<1)){var o=0
t(this).children().each(function(){if(!r)if(o>=e[i].length)r=!0
else{var s=e[i][o++]
a._pojoDifferFromInput(t(this),i,s)&&(r=!0),a._equalsCollection(t(this),i,s)||(r=!0)}}),e[i]&&o<e[i].length&&(r=!0)}}}),!r},JsForm.prototype.fill=function(i){this.options.data=t.extend({},i),this._fill()},JsForm.prototype.fillFields=function(i){this.options.data=t.extend({},i),this._fill(!0)},JsForm.prototype.applyConditions=function(t){t||(t=this.get(!0)),this._evaluateConditionals(this.element,t)},JsForm.prototype.reset=function(){this.fill({})},JsForm.prototype.clear=function(){var i=this
t.each(this._getForm(),function(){i._clear(this,i.options.prefix)})},JsForm.prototype.destroy=function(){return t(this.element).each(function(){t(this).removeData("jsForm"),t.jsFormControls&&t(this).jsFormControls("destroy")})},t.fn.jsForm=function(i){if("object"!=typeof i&&i){var s,e=Array.prototype.slice.call(arguments,1)
if(0===this.length)return null
if(1===this.length)if(s=t(this).data("jsForm"))return 0!==i.indexOf("_")&&s[i]?s[i].apply(s,e):(t.error("Method "+i+" does not exist on jQuery.jsForm"),!1)
return this.each(function(){if(s=t.data(this,"jsForm"))return 0!==i.indexOf("_")&&s[i]?s[i].apply(s,e):(t.error("Method "+i+" does not exist on jQuery.jsForm"),!1)})}return this.each(function(){t(this).data("jsForm")||t(this).data("jsForm",new JsForm(this,i))})},t.jsForm=function(i,s){var r=a[i]
if(t.isFunction(s))r&&t.each(r,function(){s(this,t(this.element))}),e[i]=s
else if(r){var o=s,n=Array.prototype.slice.call(arguments,2)
t.each(portlets,function(){this[o].apply(this,n)})}}}(jQuery,window)