// mB v6.07.07 on 2019-06-29T17:48:14.275Z
var merge=function(e,t){for(prop in e)prop in t||(t[prop]=e[prop])}
function getDimension(e,t){if(e===window){var i=e.document.documentElement["client"+t],o=e.document.body
return"CSS1Compat"===e.document.compatMode&&i||o&&o["client"+t]||i}return Math.max(e.documentElement["client"+t],e.body["scroll"+t],e.documentElement["scroll"+t],e.body["offset"+t],e.documentElement["offset"+t])}var Baseliner=function(e){if(null==e)e={}
else{var t=parseInt(e)
0==t||isNaN(t)||(e={gridHeight:t})}merge({gridColor:[196,196,196],gridHeight:10,gridOffset:0,gridOpacity:100,gridSpace:1},e),this.opts=e
var i=this
this.overlay_id="baseline-overlay",this.overlay=null,this.showText=document.createTextNode("Show Baseline"),this.hideText=document.createTextNode("Hide Baseline"),this.resize=function(){this.overlay&&(height=getDimension(document,"Height"),width=getDimension(window,"Width"),this.overlay.style.width=width+"px",this.overlay.style.height=height+"px")},this.create=function(){if(!document.getElementById(this.overlay_id)){this.overlay=document.createElement("div"),this.overlay.id=this.overlay_id,document.body.appendChild(this.overlay)
var e="url(\"data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' width='"+this.opts.gridSpace+"' height='"+this.opts.gridHeight+"'><rect style='fill: "+this.opts.gridColor+";'  width='1' height='0.25px' x='0' y='"+(this.opts.gridHeight-1)+"'/></svg>\")"
this.overlay.style.backgroundImage=e,this.overlay.style.position="absolute",this.overlay.style.top=this.opts.gridOffset+"px",this.overlay.style.left="0px",this.overlay.style.zIndex=9998,this.overlay.style.pointerEvents="none",this.overlay.style.opacity=this.opts.gridOpacity/100,this.resize()}},this.toggle=function(e){if(e){var t=document.getElementById(this.overlay_id)
t&&document.body.removeChild(t)}this.create(),e||"block"!=this.overlay.style.display?(this.showText.parentNode&&this.overlay_it.replaceChild(this.hideText,this.showText),this.overlay.style.display="block"):(this.hideText.parentNode&&this.overlay_it.replaceChild(this.showText,this.hideText),this.overlay.style.display="none")},this.refresh=function(e){if((e=parseInt(e))<1||isNaN(e))return this.value=i.opts.gridHeight,i.grid_size.style.backgroundColor="red",void(i.grid_size.style.color="white")
i.grid_size.style.backgroundColor="white",i.grid_size.style.color="black",i.overlay&&(document.body.removeChild(i.overlay),i.overlay=null),i.opts.gridHeight=e,i.toggle(!0)},this.refreshOffset=function(e){if((e=parseInt(e))<0||isNaN(e))return this.value=i.opts.gridOffset,i.grid_offset.style.backgroundColor="red",void(i.grid_offset.style.color="white")
i.grid_offset.style.backgroundColor="white",i.grid_offset.style.color="black",i.overlay&&(document.body.removeChild(i.overlay),i.overlay=null),i.opts.gridOffset=e,i.toggle(!0)},init=function(){switch(i.opts.gridColor){case"green":i.opts.gridColor=[0,255,0]
break
case"blue":i.opts.gridColor=[0,0,255]
break
case"red":i.opts.gridColor=[255,0,0]
break
case"black":i.opts.gridColor=[0,0,0]}i.opts.gridColor="rgb("+i.opts.gridColor[0]+","+i.opts.gridColor[1]+","+i.opts.gridColor[2]+")"
var e=document.createElement("a")
e.setAttribute("href",""),e.style.color="#EEE",e.style.marginRight="12px",e.appendChild(i.showText),e.onclick=function(e){if(!e)e=window.event
return i.toggle(),e.cancelBubble=!0,e.stopPropagation&&(e.stopPropagation(),e.preventDefault()),!1},i.overlay_it=e
var t=document.createElement("label")
t.setAttribute("for","baseliner-grid-size"),t.innerText="Grid Size: "
var o=document.createElement("input")
o.setAttribute("name","baseliner-grid-size"),o.size=3,o.type="number",o.value=i.opts.gridHeight,o.style.textAlign="center",o.style.border="1px solid #CCC",o.style.padding="1px",o.style.marginRight="5px",i.grid_size=o
var r=document.createElement("label")
r.setAttribute("for","baseliner-grid-size"),r.innerText="Grid Offset: "
var s=document.createElement("input")
s.setAttribute("name","baseliner-grid-size"),s.size=3,s.type="number",s.value=i.opts.gridOffset,s.style.textAlign="center",s.style.border="1px solid #CCC",s.style.padding="1px",i.grid_offset=s
var l=document.createElement("div")
l.style.position="relative",l.style.zIndex=2e4,l.style.marginTop="20px"
var n,d=document.createElement("div")
d.id="overlay-it",d.style.position="fixed",d.style.bottom="0px",d.style.left="10px",d.style.display="inline",d.style.padding="5px 15px",d.style.fontFamily="Arial, sans-serif",d.style.fontSize="12px",d.style.fontWeight="bold",d.style.textAlign="center",d.style.backgroundColor="#333",d.style.color="#EEE",d.appendChild(e),d.appendChild(t),d.appendChild(o),d.appendChild(r),d.appendChild(s),l.appendChild(d),document.body.appendChild(l)
o.onchange=o.onkeyup=function(){window.clearTimeout(n),n=window.setTimeout(function(){i.refresh(o.value)},400)}
s.onchange=s.onkeyup=function(){window.clearTimeout(n),n=window.setTimeout(function(){i.refreshOffset(s.value)},400)},window.onresize=function(){i.resize()},document.onkeyup=function(e){if(!e)e=window.event
27==(e.keyCode||e.which)&&(window.clearTimeout(n),n=window.setTimeout(function(){i.toggle()},400))}},init()}