
// specific:
script.
	const fconfig = {
		//apiKey: 'AIzaSyASZVGB4'+'s'+'1uKB4OdxPCcbJ3ebf44KUYdIE',
		//authDomain: 'nbake1-1.firebaseapp.com',
		//projectId: 'nbake1-1'

		apiKey: "AIzaSyD3QX4kA2wnTVIsmRuK9OrwjM-Ya12SvPg",
		authDomain: "test-crud1.firebaseapp.com",
		//databaseURL: "https://test-crud1.firebaseio.com",
		projectId: "test-crud1",
		//storageBucket: "test-crud1.appspot.com",
		//messagingSenderId: "102421225201"

	}

// example use ///////////////////////////////////////////////////////////
	/* put in header or better yet in a RIOT tag
	*/
	// in FireBase set:
	// allow read, write: if request.auth.token.email_verified == true ;

// CRUD generic ///////////////////////////////////////////////////////////////////
script(src='https://www.gstatic.com/firebasejs/5.3.0/firebase-app.js')
script(src='https://www.gstatic.com/firebasejs/5.3.0/firebase-auth.js')
script(src='https://www.gstatic.com/firebasejs/5.3.0/firebase-firestore.js')

script.
	//CRUD ver original 3.06.25
	firebase.initializeApp(fconfig)
	const auth =firebase.auth()
	auth.setPersistence(firebase.auth.Auth.Persistence.LOCAL)

	const db  = firebase.firestore()
	const dsettings = {/* your settings... */ timestampsInSnapshots: true}
	db.settings(dsettings)

	function isUserIn() { // use this to check if user is auth and valid
		if(!auth.currentUser) return false
		return auth.currentUser.emailVerified
	}

	function sendEmailVerification() {
			if(!isUserIn()) {
				console.log('sending', auth.currentUser)
				auth.currentUser.sendEmailVerification()
			}
			else
				console.log('no currentUser')
	}

	auth.onAuthStateChanged(function(user_) {
		if (isUserIn()) {
			console.log('CRUDauth', isUserIn())
		}
		else {
			console.log('CRUDauth','bye')
		}
	})





