
# Tutorial 4: Use Firestore for pure client-side CRUD and authentication

Similar to AWS Cognito, Firebase includes pure client-side user authentication.

Firebase also has push and a database named Firestore.
It can be used from the browser via JavaScript, no custom Cloud v2.0 code is needed. This is key to be able to develop faster.

Firebase is free for up to 50,000 reads and 20,000 writes per day. See more details [here]

## Steps

We assume you have completed [Tutorial 1](/t1/), [Tutorial 2](/t2/) and [Tutorial 3](/t3/).

1. Using the AWS S3 browser, create a bucket in the same region as you used in [Tutorial 1](/t1/). Name the bucket 'wgehner-crud' (replace wgehner with your name or something else unique). Configure the bucket for static website hosting and apply the access policy analog to the 'firo' project ([Step 3](/t1/#configure) in Tutorial 1. Copy the 'Endpoint URL'. The new bucket should show up as a folder in your mapped drive (e.g. `W:\wgehner-crud`). This folder will be the project root. Extract the CRUD sample project to your computer with `mbake -c` and copy the project files (inside of /crud) into the project root. In a browser, open the Endpoint URL. You should see the CRUD Template app. 

2. Create a Google account if you don't already have one. Then log into <https://console.firebase.google.com>. Create a project named `test-crud1`. Under the left menu 'Develop - Database', create a Firestore app in test mode.
On the Project Overview, click the `</>` button near 'Add an app to get started'. In your mapped project `/layoutOff/crud.pug`, overwrite the values for apiKey, authDomain and projectId with the values shown in the Firebase popup and save. Run `mbake .` from the project root. In a browser, refresh the Endpoint URL. 

3. In the browser, navigate to the 'CRUD' screen, overtype 'more data' with a custom string and click 'Add data'. Back in the Firebase Console, in 'Develop - Database', you should see the inserted data as first item in 'table_one'. 

# CRUDA


The CRUDA example app uses FireStore.

- [CRUD and Auth Example](https://github.com/metabake/_mBake/releases/download/3.8.1/cruda.zip)

FireStore replaces MongoDB, but also ORM, REST, DevOps, Security, Failover, etc. But sadly, just like you had to learn MongoDB for example, you have to learn how to use FireStore.


Also it has an auth example, it is up to you to manage user access for
the users that do not have auth.

## Fetch

When doing fetch, you want to do it in head. So that it is done in parallel with UI.
When data is back, ux is ready to bind - so it's not sequential, and you don't wait. Also FireStore should be in head.

And, since FireStore has secret keys, you should put it in a -tag.
When -tag is made, .min.js file is obfuscated.

