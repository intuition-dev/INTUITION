// v4.16.19 on 2019-02-25T00:30:58.242Z
class FormBind {
 constructor() {
  this.form = '', this.id = void 0 !== sessionStorage.getItem('id') && JSON.parse(sessionStorage.getItem('id')), 
  this.viewModel = new FormViewModel();
 }
 init(divId) {
  let _this = this;
  this.form = '#' + divId, null != this.id && Promise.all([ this.viewModel.read(this.id) ]).then(function() {
   let data = _this.viewModel.getViewForm('form1');
   $('#form1').find('input[name="col1"]').val(data.col1), $('#form1').find('input[name="col2"]').val(data.col2), 
   $('#form1').find('input[name="id"]').val(data.id);
  });
 }
 add(row) {
  let validation = this.viewModel.valid(row);
  'OK' == validation && this.viewModel.add(row);
 }
 update(row) {
  let validation = this.viewModel.valid(row);
  'OK' == validation && this.viewModel.update(row);
 }
 delete(row) {
  this.viewModel.delete(row);
 }
 getFields() {
  let lst = {}, input = $(this.form + ' [name="id"]');
  return lst.id = input.val(), $(this.form + ' input').each(function(index) {
   let input = $(this);
   lst[input.attr('name')] = input.val();
  }), lst;
 }
 clearFields() {
  sessionStorage.removeItem('id'), $(this.form).find('input').val('');
 }
}