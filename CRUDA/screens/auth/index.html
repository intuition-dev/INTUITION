<!DOCTYPE html><html><head><!--<script src="https://console.re/connector.js" data-channel="MY_NAME" id="consolerescript"></script>--><script>ROOT = '' //- sets global pug and .js from dat.yaml
console.log('root','')
let _start=Date.now()</script><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1"><title>metabake.org</title><link rel="shortcut icon" href="/assets/favicon.png" type="image/x-icon"><!-- specific:--><script>const fconfig = {
	apiKey: 'AIzaSyASZVGB4'+'s'+'1uKB4OdxPCcbJ3ebf44KUYdIE',
	authDomain: 'mbake1-1.firebaseapp.com',
	projectId: 'mbake1-1'
}
</script><!-- example use ////////////////////////////////////////////////////////////* put in header or better yet in a RIOT tag, ex:
	link(rel='icon', href='....favicon.ico')
	include crud
*/
// in FireBase set:
// allow read, write: if request.auth.token.email_verified == true ;
--><!-- CRUD generic ///////////////////////////////////////////////////////////////////--><script src="https://www.gstatic.com/firebasejs/5.3.0/firebase-app.js"></script><script src="https://www.gstatic.com/firebasejs/5.3.0/firebase-auth.js"></script><script src="https://www.gstatic.com/firebasejs/5.3.0/firebase-firestore.js"></script><script>//CRUD ver original 3.06.25
firebase.initializeApp(fconfig)
const auth =firebase.auth()
auth.setPersistence(firebase.auth.Auth.Persistence.LOCAL)

const db  = firebase.firestore()
const dsettings = {/* your settings... */ timestampsInSnapshots: true}
db.settings(dsettings)

function isUserIn() { // use this to check if user is auth and valid
	if(!auth.currentUser) return false
	return auth.currentUser.emailVerified
}

function sendEmailVerification() {
		if(!isUserIn()) {
			console.log('sending', auth.currentUser)
			auth.currentUser.sendEmailVerification()
		}
		else
			console.log('no currentUser')
}

auth.onAuthStateChanged(function(user_) {
	if (isUserIn()) {
		console.log('CRUDauth', isUserIn())
	}
	else {
		console.log('CRUDauth','bye')
	}
})</script><script src="https://cdn.jsdelivr.net/npm/loadjs@3.5.4/dist/loadjs.js"></script><script src="https://cdn.jsdelivr.net/npm/riot@3.11.1/riot.min.js"></script><script src="https://unpkg.com/axios@0.18.0/dist/axios.min.js"></script><style>.delayShowing { opacity: 0.01; }</style></head><body><script src="https://cdn.jsdelivr.net/npm/jquery@3.3.1/dist/jquery.min.js"></script><script src="/assets/js/setup.js"></script><div class="c-offcanvas-content-wrap"><div class="flex edge" id="topNav"><div class="left"><h2 class="pad white text-bold">Metabake.org</h2></div><div class="right"><div class="pad" id="navBarCont"><!-- on bar, clone element to navOpen is-hidden-touch--><ul class="hide-lg nav" id="navBar" data-function="navbar"><li><a href="/screens/auth">Auth</a></li><li><a href="/screens/members">CRUD</a></li><li><a href="/screens/membersTag">Tag</a></li></ul><a class="js-offcanvas-trigger" id="off-cbut" href="#navOpen"><div class="show-lg" style="color:white"><svg class="bord feather" width="24" height="24" viewBox="0 0 24 24"><line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="18" x2="21" y2="18"></line></svg></div></a></div></div></div><div id="router"><div class="pad"><form class="grid-form" autocomplete="off"><fieldset><legend>Auth Fire Form</legend><div data-row-span="2"><div data-field-span="1"><label> Email</label><input type="text" name="email" placeholder="al@gore.org"></div><div data-field-span="1"><label>Password</label><input type="text" name="pswd" placeholder="654321"></div></div></fieldset></form><div class="buts"><br><div class="button" id="up">SignUp</div><div class="button" id="in">SignIn</div><div class="button" id="out">SigOut</div><div class="button" id="rest">Reset</div></div><style>.buts * {
   margin: .5rem;
}
</style><script>loadjs.ready('style', function () {

   $('#up').click(function(){
      let email = $('#f1 [name="email"]').val()
      let pswd = $('#f1 [name="pswd"]').val()
      console.log(email,pswd)
      auth.createUserWithEmailAndPassword(email,pswd)
         .then(function(user) {
            sendEmailVerification()
         })
         .catch(function(error){
            //show error in .message
            console.log(error)
         })
   })//click

   $('#in').click(function(){
      let email = $('#f1 [name="email"]').val()
      let pswd = $('#f1 [name="pswd"]').val()
      console.log(email,pswd)
      auth.signInWithEmailAndPassword(email,pswd)
         .then(function(user) {
            console.log(user)
         })
         .catch(function(error){
            console.log(fail, error)
         })
   })//click

   $('#out').click(function(){
      console.log('out')
      auth.signOut()
   })//click

   $('#rest').click(function(){
      let email = $('#f1 [name="email"]').val()
      console.log(email)
      auth.sendPasswordResetEmail(email)
   })//click

}) //on ready</script></div><!--link(href= ROOT + '/assets/css/debug.css', rel='stylesheet')--></div></div><div class="delayShowing" id="navOpen"><div class="navOpenBrand has-background-black has-text-white"><div class="pad is-size-4">My App</div></div><ul class="navOpen-list"><li><a href="">Home2</a></li><li><a href="/screens/scrA">One</a></li><li><a href="/screens/scrB">Two</a></li></ul></div><link href="/assets/css/spectre.css" onload="cssLoaded()" rel="stylesheet"><link href="https://fonts.googleapis.com/css?family=Open+Sans" rel="stylesheet"><link href="/assets/css/main.css" rel="stylesheet"><script>function userSzSc() {
   console.log('resize|scroll')
}</script><!- mB vv3.8.11 on 2018-08-15T22:18:36.859Z --></body></html>