// mB v6.07.21 on 2019-07-09T22:00:51.618Z
class IntuAPI{constructor(){this.serviceRPC=new httpRPC(apiProtocol,apiHost,"undefined"!=typeof apiPort?apiPort:"")
let e=window.sessionStorage.getItem("username"),i=window.sessionStorage.getItem("password")
null!==e&&null!==i&&this.serviceRPC.setUser(e,i)}checkEditor(e,i){let s=this
return this.serviceRPC.invoke("api","editors","check-editor",{editor_email:e,editor_pass:i}).then(function(t){return!!t&&(s.serviceRPC.setUser(e,i),!0)})}getDirsList(){let e=window.sessionStorage.getItem("username"),i=window.sessionStorage.getItem("password")
return this.serviceRPC.invoke("api","editors","get-items",{editor_email:e,editor_pass:i})}getSubDirsList(e){let i=window.sessionStorage.getItem("username"),s=window.sessionStorage.getItem("password")
return this.serviceRPC.invoke("api","editors","get-files",{post_id:e,editor_email:i,editor_pass:s})}getFile(e,i){let s=window.sessionStorage.getItem("username"),t=window.sessionStorage.getItem("password")
return this.serviceRPC.invoke("api","editors","get-file-content",{post_id:e,pathPrefix:i,editor_email:s,editor_pass:t})}saveFile(e,i,s){let t=window.sessionStorage.getItem("username"),o=window.sessionStorage.getItem("password")
return this.serviceRPC.invoke("api","editors","save-file",{post_id:e,pathPrefix:s,content:btoa(i),editor_email:t,editor_pass:o})}mbakeCompile(e,i,s){let t=window.sessionStorage.getItem("username"),o=window.sessionStorage.getItem("password")
return this.serviceRPC.invoke("api","editors","compile-code",{post_id:e,pathPrefix:s,content:btoa(i),editor_email:t,editor_pass:o}).then(function(e){return e}).catch(function(e){return e})}clonePage(e,i){let s=window.sessionStorage.getItem("username"),t=window.sessionStorage.getItem("password")
return this.serviceRPC.invoke("api","editors","clone-page",{post_id:e,pathPrefix:i,editor_email:s,editor_pass:t})}upload(e,i){let s=window.sessionStorage.getItem("username"),t=window.sessionStorage.getItem("password")
return this.serviceRPC.invoke("api","editors","upload",{pathPrefix:i,editor_email:s,editor_pass:t},e.get("sampleFile")).then(function(e){}).catch(function(e){})}setPublishDate(e,i){let s=window.sessionStorage.getItem("username"),t=window.sessionStorage.getItem("password")
return this.serviceRPC.invoke("api","editors","set-publish-date",{publish_date:e,post_id:i,editor_email:s,editor_pass:t})}getMbakeVersion(){let e=window.sessionStorage.getItem("username"),i=window.sessionStorage.getItem("password")
return this.serviceRPC.invoke("api","editors","mbake-version",{editor_email:e,editor_pass:i}).then(function(e){})}sendVcodEditor(e){return this.serviceRPC.invoke("api","editors","reset-password-code",{admin_email:e}).then(function(){return!0})}resetPassEditor(e,i,s){return this.serviceRPC.invoke("api","editors","reset-password",{admin_email:e,code:i,password:s})}checkAdmin(e,i){let s=this
return this.serviceRPC.invoke("api","admin","check-admin",{admin_email:e,admin_pass:i}).then(function(t){return!!t&&(s.serviceRPC.setUser(e,i),!0)})}setupApp(e){let i=window.sessionStorage.getItem("username"),s=window.sessionStorage.getItem("password")
return this.serviceRPC.invoke("api","admin","setup-app",{item:e,admin_email:i,admin_pass:s})}getEditorsList(){let e=window.sessionStorage.getItem("username"),i=window.sessionStorage.getItem("password")
return this.serviceRPC.invoke("api","admin","get-editors",{admin_email:e,admin_pass:i})}addEditor(e,i,s){let t=window.sessionStorage.getItem("username"),o=window.sessionStorage.getItem("password")
return this.serviceRPC.invoke("api","admin","add-editor",{name:e,email:i,password:s,admin_email:t,admin_pass:o})}editEditor(e,i){return this.serviceRPC.invoke("api","admin","edit-editor",{name:i,uid:e,admin_email:window.sessionStorage.getItem("username"),admin_pass:window.sessionStorage.getItem("password")})}deleteEditor(e){return this.serviceRPC.invoke("api","admin","delete-editor",{uid:e,admin_email:window.sessionStorage.getItem("username"),admin_pass:window.sessionStorage.getItem("password")})}sendVcode(e){return this.serviceRPC.invoke("api","admin","resetPassword-code",{admin_email:e}).then(function(){return!0})}resetPass(e,i,s){return this.serviceRPC.invoke("admin","admin","reset-password",{admin_email:e,code:i,password:s})}getConfig(){let e=window.sessionStorage.getItem("username"),i=window.sessionStorage.getItem("password")
return this.serviceRPC.invoke("api","admin","get-config",{admin_email:e,admin_pass:i})}updateConfig(e,i,s){let t=window.sessionStorage.getItem("username"),o=window.sessionStorage.getItem("password")
return this.serviceRPC.invoke("api","admin","update-config",{admin_email:t,admin_pass:o,port:e,path:i,printfulApi:s.length?s:""})}createConfig(e){var i=e.filter(e=>"email"==e.name)[0].value,s=e.filter(e=>"password"==e.name)[0].value,t=e.filter(e=>"service_id"==e.name)[0].value,o=e.filter(e=>"template_id"==e.name)[0].value,r=e.filter(e=>"user_id"==e.name)[0].value
return this.serviceRPC.invoke("setup","setup","setup",{email:i,password:s,emailjsService_id:t,emailjsTemplate_id:o,emailjsUser_id:r}).then(e=>e).catch(e=>{})}}